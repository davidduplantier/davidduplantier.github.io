<style>
</style>

<canvas id="mypic" width="500" height="667"></canvas>
<button id="monochrome">Monochrome</button>
<button id="vivid">Vivid</button>

<script>
  let img = new Image();
  img.src = "CroissantAndCoke.jpg";
  img.onload = function() {
    draw(this);

  }

  function draw(img) {
    let canvas = document.getElementById("mypic");
    let ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);
    let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    let data = imageData.data;

    function monochrome() {
      for (let i = 0; i < data.length; i += 4) {
        let avg = (data[i] + data[i+1] + data[i+2]) / 3;
        data[i] = avg;
        data[i+1] = avg;
        data[i+2] = avg;
      }
      ctx.putImageData(imageData, 0, 0);
    }

    function vivid() {
      const BOOST = 1.3;
      for (let i = 0; i < data.length; i += 4) {
        if (data[i] > data[i+1] && data[i] > data[i+2]) {
          data[i] = Math.round(BOOST * data[i]) % 256;
        }
        else if (data[i+1] > data[i] && data[i+1] > data[i+2]) {
          data[i+1] = Math.round(BOOST * data[i+1]) % 256;
        }
        else {
          data[i+2] = Math.round(BOOST * data[i+2]) % 256;
        }
      }
      ctx.putImageData(imageData, 0, 0);
    }

    document.getElementById("monochrome").addEventListener("click", monochrome);
    document.getElementById("vivid").addEventListener("click", vivid);
  }
</script>
